(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3823:function(e,t,a){Promise.resolve().then(a.bind(a,3203))},3203:function(e,t,a){"use strict";a.d(t,{DayTimeline:function(){return er}});var s=a(288),r=a(5192),l=a(7601),n=a(7001),o=a(957),i=a(4835),d=a(667),c=a(4506),u=a(1232),f=a(7940),m=a(9773),p=a(7009);function x(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,p.m6)((0,m.W)(t))}let g=(0,f.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:n=!1,...o}=e,i=n?u.g7:"button";return(0,s.jsx)(i,{className:x(g({variant:r,size:l,className:a})),ref:t,...o})});function b(e){let{hour:t}=e;return(0,s.jsx)("div",{className:"h-[60px] relative flex items-start justify-center pt-1 text-sm text-gray-500",children:"".concat(t,"時")})}function j(e){let{event:t,startHour:a,onClick:r}=e,l=(t.start.getHours()-a)*60+t.start.getMinutes(),n=(t.end.getHours()-a)*60+t.end.getMinutes(),o=e=>"".concat(e.getHours(),":").concat(e.getMinutes().toString().padStart(2,"0")),i=100/t.totalColumns,d=t.column*i;return(0,s.jsxs)("div",{className:x("absolute z-10 rounded-md border p-2 shadow-sm select-none","overflow-hidden text-sm cursor-pointer hover:brightness-95 transition-all",t.color),style:{top:"".concat(l,"px"),height:"".concat(n-l,"px"),left:"".concat(d,"%"),width:"".concat(i,"%"),minWidth:"120px"},onClick:r,onTouchEnd:r,children:[(0,s.jsx)("div",{className:"font-medium truncate",children:t.title}),(0,s.jsx)("div",{className:"text-xs truncate",children:"".concat(o(t.start)," - ").concat(o(t.end))})]})}h.displayName="Button";var v=a(9009),y=a(1207);let w=v.fC;v.xz;let N=v.h_;v.x8;let D=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(v.aV,{ref:t,className:x("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});D.displayName=v.aV.displayName;let k=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(N,{children:[(0,s.jsx)(D,{}),(0,s.jsxs)(v.VY,{ref:t,className:x("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l,children:[r,(0,s.jsxs)(v.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(y.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});k.displayName=v.VY.displayName;let C=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:x("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};C.displayName="DialogHeader";let S=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:x("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};S.displayName="DialogFooter";let M=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(v.Dx,{ref:t,className:x("text-lg font-semibold leading-none tracking-tight",a),...r})});M.displayName=v.Dx.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(v.dk,{ref:t,className:x("text-sm text-muted-foreground",a),...r})}).displayName=v.dk.displayName;let z=r.forwardRef((e,t)=>{let{className:a,type:r,...l}=e;return(0,s.jsx)("input",{type:r,className:x("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});z.displayName="Input";var H=a(5690);let R=(0,f.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(H.f,{ref:t,className:x(R(),a),...r})});_.displayName=H.f.displayName;var E=a(3504),T=a(8211);let V=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(E.fC,{className:x("grid gap-2",a),...r,ref:t})});V.displayName=E.fC.displayName;let Y=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(E.ck,{ref:t,className:x("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...r,children:(0,s.jsx)(E.z$,{className:"flex items-center justify-center",children:(0,s.jsx)(T.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});Y.displayName=E.ck.displayName;var Z=a(7199),F=a(121);let O=F.fC,A=F.xz,B=r.forwardRef((e,t)=>{let{className:a,align:r="center",sideOffset:l=4,...n}=e;return(0,s.jsx)(F.h_,{children:(0,s.jsx)(F.VY,{ref:t,align:r,sideOffset:l,className:x("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});B.displayName=F.VY.displayName;var W=a(8125),I=a(9590),U=a(4773),$=a(7962);let G=W.fC;W.ZA;let J=W.B4,L=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(W.xz,{ref:t,className:x("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[r,(0,s.jsx)(W.JO,{asChild:!0,children:(0,s.jsx)(I.Z,{className:"h-4 w-4 opacity-50"})})]})});L.displayName=W.xz.displayName;let P=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(W.u_,{ref:t,className:x("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(U.Z,{className:"h-4 w-4"})})});P.displayName=W.u_.displayName;let q=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(W.$G,{ref:t,className:x("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(I.Z,{className:"h-4 w-4"})})});q.displayName=W.$G.displayName;let K=r.forwardRef((e,t)=>{let{className:a,children:r,position:l="popper",...n}=e;return(0,s.jsx)(W.h_,{children:(0,s.jsxs)(W.VY,{ref:t,className:x("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...n,children:[(0,s.jsx)(P,{}),(0,s.jsx)(W.l_,{className:x("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(q,{})]})})});K.displayName=W.VY.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(W.__,{ref:t,className:x("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=W.__.displayName;let Q=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(W.ck,{ref:t,className:x("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(W.wU,{children:(0,s.jsx)($.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(W.eT,{children:r})]})});function X(e){let{date:t,setDate:a,minTime:l}=e,n=Array.from({length:24},(e,t)=>t),o=Array.from({length:60},(e,t)=>t),[i,d]=r.useState(t.getHours()),[c,u]=r.useState(t.getMinutes()),f=(e,s)=>{let r=new Date(t);r.setHours(e,s),a(r)};r.useEffect(()=>{d(t.getHours()),u(t.getMinutes())},[t]);let m=(e,t)=>!!l&&!!(e<l.getHours()||e===l.getHours()&&t<l.getMinutes());return(0,s.jsxs)(O,{children:[(0,s.jsx)(A,{asChild:!0,children:(0,s.jsxs)(h,{variant:"outline",className:x("w-[280px] justify-start text-left font-normal",!t&&"text-muted-foreground"),children:[(0,s.jsx)(Z.Z,{className:"mr-2 h-4 w-4"}),t?t.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit",hour12:!1}):(0,s.jsx)("span",{children:"時間を選択"})]})}),(0,s.jsx)(B,{className:"w-auto p-0",align:"start",children:(0,s.jsx)("div",{className:"flex h-auto w-[280px] flex-col justify-between py-2",children:(0,s.jsx)("div",{className:"flex justify-center p-2",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)(G,{value:i.toString(),onValueChange:e=>{let t=Number.parseInt(e);d(t),f(t,c)},children:[(0,s.jsx)(L,{className:"w-[70px]",children:(0,s.jsx)(J,{placeholder:"時"})}),(0,s.jsx)(K,{children:n.map(e=>(0,s.jsx)(Q,{value:e.toString(),disabled:m(e,c),children:e.toString().padStart(2,"0")},e))})]}),(0,s.jsx)("span",{className:"text-lg",children:":"}),(0,s.jsxs)(G,{value:c.toString(),onValueChange:e=>{let t=Number.parseInt(e);u(t),f(i,t)},children:[(0,s.jsx)(L,{className:"w-[70px]",children:(0,s.jsx)(J,{placeholder:"分"})}),(0,s.jsx)(K,{children:o.map(e=>(0,s.jsx)(Q,{value:e.toString(),disabled:m(i,e),children:e.toString().padStart(2,"0")},e))})]})]})})})})]})}function ee(e){let{open:t,onClose:a,onSave:l,onDelete:n,startTime:o,endTime:i,colorOptions:d,event:c}=e,[u,f]=(0,r.useState)((null==c?void 0:c.title)||""),[m,p]=(0,r.useState)((null==c?void 0:c.color)||d[0]),[x,g]=(0,r.useState)(o),[b,j]=(0,r.useState)(i);return(0,r.useEffect)(()=>{c?(f(c.title),p(c.color),g(c.start),j(c.end)):(f(""),p(d[0]),g(o),j(i))},[c,d,o,i]),(0,s.jsx)(w,{open:t,onOpenChange:a,children:(0,s.jsxs)(k,{className:"sm:max-w-[425px]",children:[(0,s.jsx)(C,{children:(0,s.jsx)(M,{children:c?"予定の編集":"新しい予定"})}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l({id:null==c?void 0:c.id,title:u||"無題の予定",color:m,start:x,end:b})},children:[(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(_,{htmlFor:"title",children:"タイトル"}),(0,s.jsx)(z,{id:"title",placeholder:"予定のタイトルを入力",value:u,onChange:e=>f(e.target.value),autoFocus:!0})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(_,{children:"開始時間"}),(0,s.jsx)(X,{date:x,setDate:e=>{g(e),e>b&&j(e)}})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(_,{children:"終了時間"}),(0,s.jsx)(X,{date:b,setDate:e=>{j(e)},minTime:x})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(_,{children:"カラー"}),(0,s.jsx)(V,{value:m,onValueChange:p,className:"flex flex-wrap gap-2",children:d.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(Y,{value:e,id:"color-".concat(t),className:"sr-only"}),(0,s.jsx)(_,{htmlFor:"color-".concat(t),className:"w-6 h-6 rounded-full cursor-pointer border-2 ".concat(m===e?"ring-2 ring-offset-2 ring-primary":""," ").concat(e.split(" ")[0])})]},t))})]})]}),(0,s.jsxs)(S,{children:[c&&n&&(0,s.jsx)(h,{type:"button",variant:"destructive",onClick:()=>{c&&n&&n(c.id)},children:"削除"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(h,{type:"button",variant:"outline",onClick:a,children:"キャンセル"}),(0,s.jsx)(h,{type:"submit",children:c?"更新":"保存"})]})]})]})]})})}Q.displayName=W.ck.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(W.Z0,{ref:t,className:x("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=W.Z0.displayName;let et=[{id:1,title:"朝のミーティング",start:new Date(new Date().setHours(9,0,0,0)),end:new Date(new Date().setHours(10,0,0,0)),color:"bg-blue-100 border-blue-300 text-blue-800"},{id:2,title:"プロジェクト計画",start:new Date(new Date().setHours(11,0,0,0)),end:new Date(new Date().setHours(12,30,0,0)),color:"bg-green-100 border-green-300 text-green-800"},{id:3,title:"ランチ",start:new Date(new Date().setHours(12,30,0,0)),end:new Date(new Date().setHours(13,30,0,0)),color:"bg-yellow-100 border-yellow-300 text-yellow-800"},{id:4,title:"クライアントミーティング",start:new Date(new Date().setHours(14,0,0,0)),end:new Date(new Date().setHours(15,30,0,0)),color:"bg-purple-100 border-purple-300 text-purple-800"},{id:5,title:"週次レビュー",start:new Date(new Date().setHours(16,0,0,0)),end:new Date(new Date().setHours(17,0,0,0)),color:"bg-red-100 border-red-300 text-red-800"}],ea=Array.from({length:24},(e,t)=>t),es=["bg-blue-100 border-blue-300 text-blue-800","bg-green-100 border-green-300 text-green-800","bg-yellow-100 border-yellow-300 text-yellow-800","bg-purple-100 border-purple-300 text-purple-800","bg-red-100 border-red-300 text-red-800","bg-pink-100 border-pink-300 text-pink-800","bg-indigo-100 border-indigo-300 text-indigo-800"];function er(){let[e,t]=(0,r.useState)(new Date),[a,u]=(0,r.useState)(et),[f,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null),[v,y]=(0,r.useState)(null),[w,N]=(0,r.useState)(!1),[D,k]=(0,r.useState)(null),[C,S]=(0,r.useState)(null),M=(0,r.useRef)(null),[z,H]=(0,r.useState)(!1),R=e=>{if(!M.current)return;console.log("handleStart");let t=M.current.getBoundingClientRect(),a="touches"in e?e.touches[0].clientY-t.top:e.clientY-t.top;m(!0),g(a),y(a)},_=e=>{if(!f||!M.current)return;console.log("handleMove");let t=M.current.getBoundingClientRect();y("touches"in e?e.touches[0].clientY-t.top:e.clientY-t.top)},E=()=>{if(!z&&f&&null!==p&&null!==v){console.log("handleEnd");let t=Math.min(p,v),a=Math.max(p,v),s=new Date(e);s.setHours(Math.floor(t/60),Math.floor(t%60),0,0);let r=new Date(e);r.setHours(Math.floor(a/60),Math.floor(a%60),0,0),r.getTime()-s.getTime()<9e5&&r.setTime(s.getTime()+9e5),k({start:s,end:r}),N(!0)}console.log("handleEndComplete"),m(!1),g(null),y(null),H(!1)},T=e=>{console.log("handleEventClick"),S(e),N(!0),H(!0)},V=(e,t)=>{let a=[...e].sort((e,t)=>e.start.getTime()-t.start.getTime()),s=[];a.forEach(e=>{let t=!1;for(let a=0;a<s.length;a++){let r=s[a],l=r[r.length-1];if(e.start>=l.end){r.push({...e,column:a,totalColumns:s.length+1}),t=!0;break}}t||s.push([{...e,column:s.length,totalColumns:s.length+1}])});let r=s.flat();return r.forEach(e=>{e.totalColumns=s.length}),r},Y=(0,r.useMemo)(()=>V(a.filter(t=>{let a=new Date(t.start);return a.getDate()===e.getDate()&&a.getMonth()===e.getMonth()&&a.getFullYear()===e.getFullYear()}),e),[a,e]),Z=(0,r.useMemo)(()=>Math.max(...Y.map(e=>e.totalColumns),1),[Y]);return(0,s.jsxs)("div",{className:"border rounded-lg shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(h,{variant:"outline",size:"icon",onClick:()=>{t(e=>(0,l.k)(e,1))},children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"前日"})]}),(0,s.jsxs)(h,{variant:"outline",size:"icon",onClick:()=>{t(e=>(0,n.E)(e,1))},children:[(0,s.jsx)(c.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"翌日"})]}),(0,s.jsx)("h2",{className:"text-xl font-semibold ml-2 select-none",children:(0,o.WU)(e,"yyyy年M月d日 (EEEE)",{locale:i.ja})})]}),(0,s.jsx)(h,{className:"select-none",variant:"outline",onClick:()=>{t(new Date)},children:"今日"})]}),(0,s.jsxs)("div",{className:"flex relative",children:[(0,s.jsx)("div",{className:"w-16 flex-shrink-0 border-r absolute left-0 top-0 bottom-0 bg-white z-10 select-none rounded-bl-full",children:ea.map(e=>(0,s.jsx)(b,{hour:e},e))}),(0,s.jsx)("div",{className:"flex-grow overflow-x-auto hide-scrollbar ml-16",children:(0,s.jsxs)("div",{ref:M,className:"relative",style:{minWidth:"".concat(180*Z,"px"),height:"".concat(60*ea.length,"px")},onMouseDown:R,onMouseMove:_,onMouseUp:E,onMouseLeave:E,onTouchStart:R,onTouchMove:_,onTouchEnd:E,children:[ea.map((e,t)=>(0,s.jsx)("div",{className:x("absolute w-full ".concat(0!==t?"border-t":""," border-gray-200"),"h-[60px]"),style:{top:"".concat(60*e,"px")},children:(0,s.jsx)("div",{className:"h-full w-full"})},e)),Y.map(e=>(0,s.jsx)(j,{event:e,startHour:0,onClick:()=>T(e)},e.id)),f&&null!==p&&null!==v&&(0,s.jsx)("div",{className:"absolute left-1 right-1 bg-blue-100 opacity-50 border border-blue-300 rounded-md",style:(()=>{if(!f||null===p||null===v)return{};let e=Math.min(p,v),t=Math.abs(v-p);return{top:"".concat(e,"px"),height:"".concat(t,"px")}})()})]})})]}),w&&(D||C)&&(0,s.jsx)(ee,{open:w,onClose:()=>{N(!1),k(null),S(null)},onSave:e=>{if(e.id)u(a.map(t=>t.id===e.id?{...t,...e}:t));else{let t={...e,id:a.length+1};u([...a,t])}N(!1),k(null),S(null)},onDelete:e=>{u(a.filter(t=>t.id!==e)),N(!1),S(null)},startTime:(null==C?void 0:C.start)||(null==D?void 0:D.start)||new Date,endTime:(null==C?void 0:C.end)||(null==D?void 0:D.end)||new Date,colorOptions:es,event:C})]})}}},function(e){e.O(0,[795,24,240,744],function(){return e(e.s=3823)}),_N_E=e.O()}]);